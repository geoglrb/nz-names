<html>
 <head>
   <title>text labels</title>

   <script src="https://unpkg.com/deck.gl@^6.0.0/deckgl.min.js"></script>
   <!--<script src="./tagmap-layer/tagmap-layer.js"></script>-->
   <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>

   <script src="https://api.tiles.mapbox.com/mapbox-gl-js/v0.44.1/mapbox-gl.js"></script>

   <style type="text/css">
     body {
       width: 100vw;
       height: 100vh;
       margin: 0;
     }
     #tooltip:empty {
       display: none;
     }
     #tooltip {
       font-family: Helvetica, Arial, sans-serif;
       font-size: 11px;
       position: absolute;
       padding: 4px;
       margin: 8px;
       background: rgba(0, 0, 0, 0.8);
       color: #fff;
       max-width: 300px;
       font-size: 10px;
       z-index: 9;
       pointer-events: none;
     }
   </style>
 </head>

 <body>
   <div id="tooltip"></div>
 </body>

 <script type="text/javascript">

  const {DeckGL, GeoJsonLayer} = deck;

  $.ajax({
    dataType: "json",
    url: "https://geoglrb.github.io/nz-names/tereo-places.geojson",
    success: function(data) {
      console.log(data);
      const geojsonLayer = TextLayer({
          id: 'testing',
          data: data.features,
          getLabel: x => x.properties.name,
          getPosition: x => x.geometry.coordinates,
          getColor: [29, 145, 192],
          getSize: 20,
          sizeScale: 30/20.
        });
      /*
      const geojsonLayer = TagmapLayer({
          id: 'testing',
          data.features,
          getLabel: x => x.properties.name,
          getPosition: x => x.geometry.coordinates,
          minFontSize: 14,
          maxFontSize: fontSize * 2 - 14
        })
      */

       new DeckGL({
         mapboxApiAccessToken: 'pk.eyJ1IjoiZ2VvZ2xiIiwiYSI6ImNqcGtqcjFpZjA0MjEzeG1ybWFuYXRwNGYifQ.EQNuGgIXLNfPhI_MMRVc4A',
         mapStyle: 'mapbox://styles/mapbox/light-v9',
         latitude: -49.254,
         longitude: 173.23,
         zoom: 3,
         maxZoom: 16,
         pitch: 0,
         layers: [geojsonLayer]
       });
     };
  );


 </script>
</html>
